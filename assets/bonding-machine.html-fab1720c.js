import{_ as c,H as s,W as r,X as t,a0 as o,Y as a,Z as n,$ as d}from"./framework-cd0f4961.js";const l="/DBC-Wiki/assets/image-20210629104434008-35138cc3.png",p="/DBC-Wiki/assets/image-20210714140945243-fa5d2c68.png",h="/DBC-Wiki/assets/image-20210707140400114-34db11f5.png",g="/DBC-Wiki/assets/image-20210714141352887-40929c0c.png",f="/DBC-Wiki/assets/image-20210817114537368-a316f226.png",u="/DBC-Wiki/assets/image-20210817114925965-ce0b2ddf.png",m="/DBC-Wiki/assets/image-20210817115411030-6c06ad50.png",b="/DBC-Wiki/assets/image-20210623143656481-80b86c89.png",_="/DBC-Wiki/assets/image-20210623144049700-226c116f.png",k={},v={href:"https://github.com/DeepBrainChain/DBC-DOC/blob/master/DBC_install/%E5%A4%9A%E9%87%8D%E7%AD%BE%E5%90%8D%E8%B4%A6%E6%88%B7.md",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/DeepBrainChain/DeepBrainChain-MainChain/blob/master/scripts/test_script/gen_signature.js",target:"_blank",rel:"noopener noreferrer"};function C(D,e){const i=s("ExternalLinkIcon");return r(),t("div",null,[e[11]||(e[11]=o('<h1 id="机器上链步骤" tabindex="-1"><a class="header-anchor" href="#机器上链步骤" aria-hidden="true">#</a> 机器上链步骤</h1><p>GPU 机器上线，可以获得在线奖励。本文介绍机器的上线步骤。</p><h2 id="_0-准备工作" tabindex="-1"><a class="header-anchor" href="#_0-准备工作" aria-hidden="true">#</a> 0. 准备工作</h2><ul><li><p>上线机器前，需要在机器中安装好 DBC 程序</p></li><li><p>上线机器之前，请确保钱包中有足够的余额。（设备刚上线时每张卡只能质押1000 DBC， 后面得到的收益（包含租金和每日在线奖励）会自动进入质押 直到质押总金额达到10w个dbc或者300美金）。</p></li></ul><h2 id="资金账户绑定控制账户" tabindex="-1"><a class="header-anchor" href="#资金账户绑定控制账户" aria-hidden="true">#</a> 资金账户绑定控制账户</h2><h3 id="_1-1-说明" tabindex="-1"><a class="header-anchor" href="#_1-1-说明" aria-hidden="true">#</a> 1.1 说明</h3>',6)),a("ul",null,[a("li",null,[a("p",null,[e[1]||(e[1]=n("为了您的账户资金安全，我们强烈建议使用多签账户作为资金账户，关于多签账户，请转到 ")),a("a",v,[e[0]||(e[0]=n("多重签名账户")),d(i)]),e[2]||(e[2]=n(" 了解"))])]),e[3]||(e[3]=o("<li><p><code>资金账户</code>即 <code>stash account</code> : 绑定机器时将从<code>资金账户</code>质押 DBC，分发奖励时将发放到<code>资金账户</code>。多个机器绑定到同一个资金账户下，可以获得额外的在线奖励得分。</p></li><li><p><code>控制账户</code>即 <code>controller account</code>: 相当于管理人员，负责机器上链，下链等操作</p></li><li><p><code>控制账户</code> 在链上操作产生的手续费会从<code>控制账户</code>扣除，如上链时，每台机器支付 10 DBC 手续费。</p></li>",3))]),e[12]||(e[12]=o('<h3 id="_1-2-操作" tabindex="-1"><a class="header-anchor" href="#_1-2-操作" aria-hidden="true">#</a> 1.2 操作</h3><p>点击<code>开发者</code>--<code>交易</code>，如下图选择<code>onlineProfile</code>模块的<code>setController</code>方法，分别选择<code>资金账户</code>和<code>控制账户</code>，点击右下角&quot;提交交易&quot;，进行绑定。</p><figure><img src="'+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p>如上图，BOB_STASH 账户(<code>资金账户</code>) 将 DAVE 账户设置为了<code>控制账户</code>。</p><p><code>资金账户</code>: <code>5HpG9w8EBLe5XCrbczpwq5TSXvedjrBGCwqxK1iQ7qUsSWFc</code></p><p><code>控制账户</code>: <code>5DAAnrj7VHTznn2AWBemMuyBwZWs6FNFjdyVXUeYum3PTXFy</code></p></blockquote><h3 id="_1-3-查询资金账户与控制账户是否绑定成功" tabindex="-1"><a class="header-anchor" href="#_1-3-查询资金账户与控制账户是否绑定成功" aria-hidden="true">#</a> 1.3 查询资金账户与控制账户是否绑定成功</h3><p>如下图，当资金账户绑定成功控制账户后，可以通过<code>开发者</code>--<code>链状态</code>，选择<code>onlineProfile</code>模块的<code>controllerStash</code>存储，来查询<code>控制账户</code>对应的资金账户。下图，查询到了一个控制账户对应的资金账户。</p><figure><img src="'+p+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_2-机器生成签名消息" tabindex="-1"><a class="header-anchor" href="#_2-机器生成签名消息" aria-hidden="true">#</a> 2. 机器生成签名消息</h2><blockquote><p>需要使用机器私钥生成签名消息，发送到链上，以确认资金账户。这一步是为了证明资金账户拥有该机器。</p></blockquote><h3 id="_2-1-查询机器id和机器私钥" tabindex="-1"><a class="header-anchor" href="#_2-1-查询机器id和机器私钥" aria-hidden="true">#</a> 2.1 查询<code>机器ID</code>和<code>机器私钥</code></h3><p>需要在安装好 DBC 程序的机器中，查询机器私钥。并用该私钥生成签名消息，发到链上。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 机器ID和私钥在dbc安装程序的目录下，如：</span>
<span class="token comment"># /home/dbc/0.3.x.x/dbc_repo/dat/node.dat</span>
<span class="token comment"># 其内容为：</span>
<span class="token assign-left variable">node_id</span><span class="token operator">=</span>8eaf04151687736326c9fea17e25fc5287613693c912909cb226aa4794f26a48          <span class="token comment"># 机器ID</span>
<span class="token assign-left variable">node_private_key</span><span class="token operator">=</span>398f0c28f98885e046333d4a41c19cee4c37368a9832c6502f6cfd182e2aef89 <span class="token comment"># 机器私钥</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-使用机器私钥生成签名数据" tabindex="-1"><a class="header-anchor" href="#_2-2-使用机器私钥生成签名数据" aria-hidden="true">#</a> 2.2 使用<code>机器私钥</code>生成签名数据</h3>`,13)),a("p",null,[e[5]||(e[5]=n("使用我们提供的")),a("a",x,[e[4]||(e[4]=n("脚本")),d(i)]),e[6]||(e[6]=n("生成签名数据。")),e[7]||(e[7]=a("code",null,"Signature:",-1)),e[8]||(e[8]=n("后的数据即为")),e[9]||(e[9]=a("strong",null,"签名数据",-1)),e[10]||(e[10]=n("。"))]),e[13]||(e[13]=o(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 自行安装node.js v14</span>
<span class="token comment"># Clone 仓库，并下载依赖：</span>
<span class="token function">git</span> clone https://github.com/DeepBrainChain/DeepBrainChain-MainChain.git <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> DeepBrainChain-MainChain/scripts/test_script
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># 生成签名</span>
<span class="token function">node</span> gen_signature.js <span class="token parameter variable">--key</span> 0x398f0c28f98885e046333d4a41c19cee4c37368a9832c6502f6cfd182e2aef89 <span class="token parameter variable">--msg</span> 8eaf04151687736326c9fea17e25fc5287613693c912909cb226aa4794f26a485CiPPseXPECbkjWCa6MnjNokrgYjMqmKndv2rSnekmSK2DjL

<span class="token comment">### Message: 8eaf04151687736326c9fea17e25fc5287613693c912909cb226aa4794f26a485CiPPseXPECbkjWCa6MnjNokrgYjMqmKndv2rSnekmSK2DjL</span>
<span class="token comment">### Signer: 8eaf04151687736326c9fea17e25fc5287613693c912909cb226aa4794f26a48</span>
<span class="token comment">### Signature: 0x5cc8b4c49b244d7c071b124ef68119d7549dd805ea43f69e3c142fd5909f926041a9cad93b16085d72431df2d1164e7911085423bca16625295583686f2fce8c</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>--key</code> 指定<code>机器私钥</code></p><p><strong>key 前面加上 0x</strong></p><p><code>--msg</code> 指定需要签名的消息，消息内容为 <code>机器ID+资金账户</code>；</p></blockquote><h3 id="_2-3-使用控制账户将机器绑定到资金账户" tabindex="-1"><a class="header-anchor" href="#_2-3-使用控制账户将机器绑定到资金账户" aria-hidden="true">#</a> 2.3 使用<code>控制账户</code>将机器绑定到资金账户</h3><p>现在，我们需要通过<code>控制账户</code>，把步骤 2.2 产生的**<em>签名数据</em>**提交到链上。</p><p>导航到：<code>开发者</code>--<code>交易</code>，如下图选择<code>onlineProfile</code>模块的<code>bondMachine</code>方法。使用<code>控制账户</code>，将<code>机器ID</code>(<code>MachineId</code>)与<code>控制账户</code>进行绑定即可。参数填写如下图：</p><figure><img src="`+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_2-4-查询机器是否绑定成功" tabindex="-1"><a class="header-anchor" href="#_2-4-查询机器是否绑定成功" aria-hidden="true">#</a> 2.4 查询机器是否绑定成功</h3><p>完成上一步后，可以通过<code>开发者</code>--<code>链状态</code>--<code>onlineProfile</code>--<code>liveMachines</code>查询系统中的机器。如下图，查询到一台机器已被绑定。接下来需要补充机器信息</p><figure><img src="'+g+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_3-控制账户生成机房信息" tabindex="-1"><a class="header-anchor" href="#_3-控制账户生成机房信息" aria-hidden="true">#</a> 3. <code>控制账户</code>生成机房信息</h2><h3 id="说明" tabindex="-1"><a class="header-anchor" href="#说明" aria-hidden="true">#</a> 说明</h3><p><strong>资金账户第一次绑定机器或者机器在新的机房时</strong>，需要生成一个新的机房 ID。每次生成机房支付手续费<code>10 DBC</code>。</p><p>如果将要绑定的机器在同一机房，生成一次机房信息即可。如果机器在不同的机房，按情况生成对应个数机房，添加机器信息时，选择对应机房（如果机器在同一机房，则每次添加机器信息，添加相同的机房 ID 即可）。</p><h3 id="_3-1-操作-链上生成新的机房信息" tabindex="-1"><a class="header-anchor" href="#_3-1-操作-链上生成新的机房信息" aria-hidden="true">#</a> 3.1 操作：链上生成新的机房信息</h3><figure><img src="'+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_3-2-查询资金账户下生成的机房记录" tabindex="-1"><a class="header-anchor" href="#_3-2-查询资金账户下生成的机房记录" aria-hidden="true">#</a> 3.2 查询资金账户下生成的机房记录</h3><p>导航到<code>开发者</code>--<code>链状态</code>，通过<code>资金账户</code>，查看<strong>资金账户</strong>下绑定的机房：下图生成了两个机房，查询参数为资金账户。</p><figure><img src="'+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_4-控制账户添加机器信息" tabindex="-1"><a class="header-anchor" href="#_4-控制账户添加机器信息" aria-hidden="true">#</a> 4. <code>控制账户</code>添加机器信息</h2><p><code>控制账户</code>还需要补充机器信息：导航到<code>开发者</code>--<code>交易</code>--<code>onlineProfile</code>--<code>addMachineInfo</code></p><figure><img src="'+m+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><p>参数说明：</p><ul><li><p>server_name: 选择上一步生成的机房 ID</p></li><li><p>upload_net: 上传带宽（<strong>以 20MB 带宽为例，填入 20</strong> ）。</p></li><li><p>download_net: 下载带宽（<strong>以 20MB 带宽为例，填入 20</strong>）。</p></li><li><p>longitude: 经度。选择东经/西经（<strong>以东经 131.1548123 为例，乘以 10000，然后取整得到 1311548。所以网页上选择 East，填入 1311548</strong>,此处误差可以在 30 公里以内，<strong>填错了会扣除质押币</strong>）。</p></li><li><p>latitude: 纬度。选择南纬/北纬（<strong>以北纬 31.143253 为例，乘以 10000，然后取整得到 311432。所以网页上选择 North，填入 311432</strong>,此处误差可以在 30 公里以内，<strong>填错了会扣除质押币</strong>）。</p></li><li><p>机房信息，可以根据情况，从以下几种中选择：（中国移动：<code>China Mobile</code> ， 中国联通：<code>China Unicom</code> ， 中国电信： <code>China Telecom</code> ， 如为其他网络可以查询英文名进行填写）</p></li></ul></li></ul><h2 id="_5-奖励查询与领取" tabindex="-1"><a class="header-anchor" href="#_5-奖励查询与领取" aria-hidden="true">#</a> 5. 奖励查询与领取</h2><h3 id="_5-1-查询奖励" tabindex="-1"><a class="header-anchor" href="#_5-1-查询奖励" aria-hidden="true">#</a> 5.1. 查询奖励</h3><p>在开发者--链状态中选择：<code>onlineProfile</code>模块的<code>stashMachines</code>方法，参数填入**<code>资金账户</code>**，你将能查到该<code>资金账户</code>获得奖励的详细信息。</p><p>其中，<code>can_claim_reward</code>为能够领取的奖励，<code>left_reard</code>为之前每天获得奖励的剩余部分（剩下的 75%，这 75%将在随后的 150 天线性释放）。</p><figure><img src="'+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_5-2-领取奖励" tabindex="-1"><a class="header-anchor" href="#_5-2-领取奖励" aria-hidden="true">#</a> 5.2. 领取奖励</h3><p>使用<strong>控制账户</strong>领取即可，奖励将发放到**<code>资金账户</code>**。</p><figure><img src="'+_+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_6-查询账户绑定的机器" tabindex="-1"><a class="header-anchor" href="#_6-查询账户绑定的机器" aria-hidden="true">#</a> 6. 查询账户绑定的机器</h2><ul><li><p>查看资金账户下上链的机器：导航到<code>开发者</code>--&gt;<code>链状态</code>--&gt;<code>存储</code>--&gt;<code>onlineProfile</code>--&gt;<code>stashMachines</code></p></li><li><p>查看控制账户下上链的机器：导航到<code>开发者</code>--&gt;<code>链状态</code>--&gt;<code>存储</code>--&gt;<code>onlineProfile</code>--&gt;<code>controllerMachines</code></p></li></ul>',32))])}const M=c(k,[["render",C],["__file","bonding-machine.html.vue"]]);export{M as default};
