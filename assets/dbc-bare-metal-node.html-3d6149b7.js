import{_ as o,V as i,W as r,X as n,Y as e,Z as a,$ as t,F as l}from"./framework-1d64dffd.js";const p={},d=t('<h1 id="dbc-bare-metal-node" tabindex="-1"><a class="header-anchor" href="#dbc-bare-metal-node" aria-hidden="true">#</a> DBC Bare Metal Node</h1><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><ol><li>The bare metal node of DBC is only responsible for generating the node id for the bare metal server, and controlling the bare metal server to perform limited operations such as switching on and off.</li><li>Bare metal nodes do not support functions related to virtual machines. Because the requirements for the hardware equipment of the machine where the node is deployed are very low, the resources such as memory and hard disk used are very small, as long as the IPMI tool can be used for the bare metal server and the network service is normal.</li></ol><div class="hint-container tip"><p class="hint-container-title">注意！</p><p>The bare metal node of DBC itself has a &quot;node_id&quot;, which does not need to be uploaded to the chain, and is only used to generate a &quot;node_id&quot; for the bare metal server.</p><p>For example, send a request to add a bare metal server to a bare metal node. The parameter needs to tell the client node which bare metal node to send to, and fill in the information for IPMI control. The request will return a new &quot;node_id&quot;, that is the &quot;node_id&quot; of the added bare metal server. This &quot;node_id&quot; needs to be on the chain, and then the user can rent it on the chain, and use it to send the request of switching on and off.</p><p>This article mentions two kinds of node_id, which are distinguished here:</p><ul><li>&quot;The node_id of the bare metal node&quot; refers to the &quot;node_id&quot; field in the &quot;dat/node.dat&quot; file in the node installation directory.</li><li>&quot;The node_id of the bare metal server&quot; is the &quot;node_id&quot; field returned by sending the request to add the bare metal server.</li></ul></div><h2 id="install-node" tabindex="-1"><a class="header-anchor" href="#install-node" aria-hidden="true">#</a> install node</h2>',5),c={href:"http://112.192.16.27:9000/dbc/install_update_script/mainnet/install_baremetal.sh",target:"_blank",rel:"noopener noreferrer"},u=n("li",null,"run the install script:",-1),m=t(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo bash ./install_baremetal.sh &lt;installation directory&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The installation script will automatically install the IPMI tool, and like the script for installing the DBC client node, you need to enter 2 port numbers.</p><h2 id="upgrade-node" tabindex="-1"><a class="header-anchor" href="#upgrade-node" aria-hidden="true">#</a> upgrade node</h2>`,3),v={href:"http://112.192.16.27:9000/dbc/install_update_script/mainnet/update_baremetal.sh",target:"_blank",rel:"noopener noreferrer"},b=n("li",null,"Run the upgrade script：",-1),h=t(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo bash update_baremetal.sh &lt;installation directory&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="add-a-bare-metal-server" tabindex="-1"><a class="header-anchor" href="#add-a-bare-metal-server" aria-hidden="true">#</a> Add a bare metal server</h2><ul><li><p>request method：POST</p></li><li><p>request URL：</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http://{{dbc_client_ip}}:{{dbc_client_port}}/api/v1/bare_metal/add
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>request Body:</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;peer_nodes_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// node_id of bare metal node</span>
    <span class="token string">&quot;ccd9a2118ba3c95cd458302601f15281edc39d72dcf11a07527893d97ac1a573&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;additional&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Informations of bare metal server</span>
    <span class="token property">&quot;bare_metal_nodes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// The unique ID of the machine supplier to identify the bare metal, required.</span>
        <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3156995b-da18-4268-9734-f8d168e90a7d&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// The connection method provided by the bare metal server to the user. Required. A fixed IP address is recommended.</span>
        <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;175.221.204.110&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// Operating system of the bare metal server, optional.</span>
        <span class="token property">&quot;os&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ubuntu 20.04.3 LTS (Focal Fossa) 5.4.0-121-generic GNU/Linux&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// A description customized by the machine owner, not required.</span>
        <span class="token property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;在xxx平台租用的裸金属服务器，用于xxx业务，机房id是9f01ca9c-38bd-46a9-9637-dac92b352a63&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// The host ID of ipmi, required. A fixed IP address is recommended.</span>
        <span class="token property">&quot;ipmi_hostname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;192.168.0.110&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// ipmi username, required.</span>
        <span class="token property">&quot;ipmi_username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// ipmi user password, required.</span>
        <span class="token property">&quot;ipmi_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dbtu2017&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>return example：</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;bare_metal_nodes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;node_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fcf2cd8b99958606d260ca00c5ac00c88c242bcf8eb38e7cc3f29e9719a73f39&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3156995b-da18-4268-9734-f8d168e90a7d&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="query-the-list-of-bare-metal-servers" tabindex="-1"><a class="header-anchor" href="#query-the-list-of-bare-metal-servers" aria-hidden="true">#</a> Query the list of bare metal servers</h2><ul><li><p>request method：POST</p></li><li><p>request URL：</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http://{{dbc_client_ip}}:{{dbc_client_port}}/api/v1/bare_metal
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>request Body:</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;peer_nodes_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// node_id of bare metal node</span>
    <span class="token string">&quot;ccd9a2118ba3c95cd458302601f15281edc39d72dcf11a07527893d97ac1a573&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;additional&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>return example：</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;bare_metal_nodes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;node_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fcf2cd8b99958606d260ca00c5ac00c88c242bcf8eb38e7cc3f29e9719a73f39&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;node_private_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4c2e7133834d6d7dd35088beda5556215f6f5b15d2cd3c3153f117aaeec2c28b&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3156995b-da18-4268-9734-f8d168e90a7d&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;175.221.204.110&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;os&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ubuntu 20.04.3 LTS (Focal Fossa) 5.4.0-121-generic GNU/Linux&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;在xxx平台租用的裸金属服务器，用于xxx业务，机房id是9f01ca9c-38bd-46a9-9637-dac92b352a63&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ipmi_hostname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;192.168.0.110&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ipmi_username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ipmi_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dbtu2017&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="bare-metal-server-on-chain" tabindex="-1"><a class="header-anchor" href="#bare-metal-server-on-chain" aria-hidden="true">#</a> Bare metal server on-chain</h2>`,16),k={href:"https://deepbrainchain.github.io/DBC-Wiki/en/onchain-guide/bonding-machine.html",target:"_blank",rel:"noopener noreferrer"},q=t(`<p>After being on-chain, you can rent a bare metal server on the chain just like renting an ordinary computing machine.</p><div class="hint-container tip"><p class="hint-container-title">注意！</p><p>The &quot;node_id&quot; used by the bare metal server on the chain is the &quot;node_id&quot; returned by the request to add the bare metal server, and the &quot;node_private_key&quot; is obtained by querying the bare metal server above.</p></div><h2 id="use-of-bare-metal-servers" tabindex="-1"><a class="header-anchor" href="#use-of-bare-metal-servers" aria-hidden="true">#</a> Use of Bare Metal Servers</h2><p>By renting a bare metal server on the chain, you can query its machine information, and use the IP and port in the machine information to connect (ssh or Windows remote connection tool) to access.</p><p>If the bare metal server is not powered on, you can control its power to be powered on by sending a request.</p><ul><li><p>request method：POST</p></li><li><p>request URL：</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http://{{dbc_client_ip}}:{{dbc_client_port}}/api/v1/bare_metal/power
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>request Body:</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;peer_nodes_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// node_id of bare metal server</span>
    <span class="token string">&quot;fcf2cd8b99958606d260ca00c5ac00c88c242bcf8eb38e7cc3f29e9719a73f39&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;additional&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// power control command</span>
    <span class="token comment">// &quot;on&quot;     - power on</span>
    <span class="token comment">// &quot;off&quot;    - power off</span>
    <span class="token comment">// &quot;reset&quot;  - power reset</span>
    <span class="token comment">// &quot;status&quot; - get power status</span>
    <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;session_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The session_id distributed by the renter&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;session_id_sign&quot;</span><span class="token operator">:</span> <span class="token string">&quot;session_id_sign distributed by the renter&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),_={href:"https://deepbrainchain.github.io/DBC-Wiki/en/install-update-dbc-node/dbc-client-api/http-api.html#bare-metal-node-operations",target:"_blank",rel:"noopener noreferrer"};function f(g,y){const s=l("ExternalLinkIcon");return i(),r("div",null,[d,n("ol",null,[n("li",null,[e("Download the installation script："),n("a",c,[e("http://112.192.16.27:9000/dbc/install_update_script/mainnet/install_baremetal.sh"),a(s)])]),u]),m,n("ol",null,[n("li",null,[e("Download upgrade script："),n("a",v,[e("http://112.192.16.27:9000/dbc/install_update_script/mainnet/update_baremetal.sh"),a(s)])]),b]),h,n("p",null,[e('Use the "node_id" and "node_private_key" queried above to upload the bare metal server to the chain. Refer to '),n("a",k,[e("Machine Onchain steps"),a(s)])]),q,n("p",null,[e("For other API interfaces, please refer to "),n("a",_,[e("Bare Metal Node Operations"),a(s)])])])}const w=o(p,[["render",f],["__file","dbc-bare-metal-node.html.vue"]]);export{w as default};
