import{_ as c,W as l,X as r,Y as a,Z as n,$ as s,a1 as d,a0 as e,H as t}from"./framework-5cecf6de.js";const p="/DBC-Wiki/assets/image-20210126021938613-ed5880e3.png",u="/DBC-Wiki/assets/image-20210121194808850-652c90b7.png",h="/DBC-Wiki/assets/image-20210121194953014-2c0cbcd6.png",m="/DBC-Wiki/assets/image-20210121195033167-2f9f22c6.png",b="/DBC-Wiki/assets/image-20210121195307711-9ce5490a.png",v="/DBC-Wiki/assets/image-20210121200709277-b82ea79b.png",g="/DBC-Wiki/assets/image-20210121234945030-f232b1a0.png",k="/DBC-Wiki/assets/image-20210121235144583-06df3d13.png",f="/DBC-Wiki/assets/image-20210121235217665-a5da9a91.png",_="/DBC-Wiki/assets/image-20210121235451552-5c7ff86d.png",y="/DBC-Wiki/assets/image-20210329095933403-93a21fd2.png",w={},x=e('<h1 id="how-to-run-as-dbc-validator" tabindex="-1"><a class="header-anchor" href="#how-to-run-as-dbc-validator" aria-hidden="true">#</a> How to run as DBC validator?</h1><h2 id="_0-recommended-hardware" tabindex="-1"><a class="header-anchor" href="#_0-recommended-hardware" aria-hidden="true">#</a> 0. Recommended hardware</h2><ul><li>RAM：8G</li><li>CPU：2 cores</li><li>Disk：100G</li></ul><h2 id="_1-generate-stash-account" tabindex="-1"><a class="header-anchor" href="#_1-generate-stash-account" aria-hidden="true">#</a> 1. Generate stash account</h2><p>（If you already have stash account, you can skip this）</p>',5),C=e(`<h2 id="_2-get-dbc-chain-binary" tabindex="-1"><a class="header-anchor" href="#_2-get-dbc-chain-binary" aria-hidden="true">#</a> 2. Get <code>dbc-chain</code> binary</h2><h3 id="option-1-use-pre-build-version-recommended" tabindex="-1"><a class="header-anchor" href="#option-1-use-pre-build-version-recommended" aria-hidden="true">#</a> Option 1: use pre-build version (recommended)</h3><blockquote><p>If any errors, please use Option 2</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> dbc-chain-mainnet <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> dbc-chain-mainnet
<span class="token function">wget</span> https://github.com/DeepBrainChain/DeepBrainChain-MainChain/releases/download/v2.3/dbc_chain_linux_x64.tar.gz <span class="token parameter variable">-O</span> dbc_chain_linux_x64.tar.gz

<span class="token function">tar</span> xf dbc_chain_linux_x64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="option-2-compile-from-source" tabindex="-1"><a class="header-anchor" href="#option-2-compile-from-source" aria-hidden="true">#</a> Option 2: compile from source</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># install dependency</span>
<span class="token function">curl</span> https://getsubstrate.io <span class="token parameter variable">-sSf</span> <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> -- <span class="token parameter variable">--fast</span>
<span class="token builtin class-name">source</span> ~/.cargo/env

<span class="token comment"># compile dbc-chain</span>
<span class="token function">git</span> clone https://github.com/DeepBrainChain/DeepBrainChain-MainChain.git
<span class="token builtin class-name">cd</span> DeepBrainChain-MainChain <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> checkout v2.3
<span class="token function">cargo</span> build <span class="token parameter variable">--release</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-synchronize-chain-data" tabindex="-1"><a class="header-anchor" href="#_3-synchronize-chain-data" aria-hidden="true">#</a> 3. Synchronize Chain Data</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./dbc-chain --base-path ./db_data <span class="token parameter variable">--pruning</span> archive
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>If you compile from source, the binary path is <code>./target/release/dbc-chain</code></p></li><li><p>After finished synchronize, type <code>Control + C</code> to close the above command. You can compare <code>target</code> and <code>best</code> to infer if sync is finished. When <code>target</code> is closed (100 blocks, for example) to <code>best</code> , it can be regard sync is finished.</p></li></ul><figure><img src="`+p+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><strong>Flags in detail：</strong><ul><li><code>--base-path</code>：Specifies a directory where Substrate should store all the data related to this chain. If this value is not specified, a default path will be used. If the directory does not exist it will be created for you. If other blockchain data already exists there you will get an error. Either clear the directory or choose a different one. <ul><li><code>--chain ./dbcSpecRaw.json</code>：Specifies which chain specification to use.</li><li><code>--pruning=archive</code>：synchronize chain data</li><li><code>--bootnodes</code>：specified a single boot node.</li></ul></li></ul></li></ul><h2 id="_4-then-run-the-node-as-a-validator" tabindex="-1"><a class="header-anchor" href="#_4-then-run-the-node-as-a-validator" aria-hidden="true">#</a> 4.Then run the node as a validator:</h2><p>When the dbc mainnet is upgraded to version 3.0, there will be many new features that are incompatible with the old version. In order to obtain staking rewards stably, please upgrade to version 3.0</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Execute in the folder generated in step 2</span>
<span class="token function">wget</span> https://github.com/DeepBrainChain/DeepBrainChain-MainChain/releases/download/v3.2/dbc-chain-v3.tar.gz <span class="token parameter variable">-O</span> dbc_chain_linux_x64.tar.gz

<span class="token function">tar</span> xf dbc_chain_linux_x64.tar.gz

<span class="token comment">#Run verification node</span>
<span class="token comment"># Query and stop the old version of the synchronization node</span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> dbc-chain

<span class="token comment">#The result is similar to the following display</span>
root <span class="token number">761495</span> <span class="token number">0.0</span> <span class="token number">0.0</span> <span class="token number">9584</span> <span class="token number">2588</span> pts/0 S+ <span class="token number">17</span>:07 <span class="token number">0</span>:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto <span class="token parameter variable">-w</span> dbc-chain
root <span class="token number">926101</span> <span class="token number">2.0</span> <span class="token number">5.1</span> <span class="token number">4295592</span> <span class="token number">1650640</span> ? Sl <span class="token number">2023</span> <span class="token number">5320</span>:10 ./dbc-chain --base-path ./db_data <span class="token parameter variable">--port</span> <span class="token number">30337</span> --ws-port <span class="token number">9948</span> --rpc-port <span class="token number">9937</span> <span class="token parameter variable">--pruning</span> archive

<span class="token comment"># Stop old node</span>
<span class="token function">sudo</span> <span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token number">926101</span> <span class="token punctuation">(</span>note to replace with the actual queried PID<span class="token punctuation">)</span>

<span class="token comment">#Start new version node</span>
<span class="token function">nohup</span> ./dbc-chain --base-path ./db_data <span class="token parameter variable">--chain</span> dbcSpecRaw.json <span class="token parameter variable">--validator</span> <span class="token parameter variable">--name</span> YourNodeName <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>dbc_node.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>

<span class="token comment">#If you encounter a startup error</span>
./dbc-chain: /lib/x86_64-linux-gnu/libstdc++.so.6: version <span class="token variable"><span class="token variable">\`</span>GLIBCXX_3.4.30&#39; not found <span class="token punctuation">(</span>required by ./dbc-chain<span class="token punctuation">)</span>
./dbc-chain: /lib/x86_64-linux-gnu/libstdc++.so.6: version <span class="token variable">\`</span></span>GLIBCXX_3.4.29<span class="token string">&#39; not found (required by ./dbc-chain)
./dbc-chain: /lib/x86_64-linux-gnu/libc.so.6: version \`GLIBC_2.32&#39;</span> not found <span class="token punctuation">(</span>required by ./dbc-chain<span class="token punctuation">)</span>
./dbc-chain: /lib/x86_64-linux-gnu/libc.so.6: version <span class="token variable"><span class="token variable">\`</span>GLIBC_2.34&#39; not found <span class="token punctuation">(</span>required by ./dbc-chain<span class="token punctuation">)</span>
./dbc-chain: /lib/x86_64-linux-gnu/libc.so.6: version <span class="token variable">\`</span></span>GLIBC_2.33&#39; not found <span class="token punctuation">(</span>required by ./dbc-chain<span class="token punctuation">)</span>

<span class="token comment">#solution:</span>
<span class="token comment">#1. Users in China:</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;deb http://mirrors.aliyun.com/ubuntu/ jammy main&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/apt/sources.list
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libc6 libstdc++6 <span class="token parameter variable">-y</span>
<span class="token comment">#2. Non-China users</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;deb http://archive.ubuntu.com/ubuntu/ jammy main&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/apt/sources.list
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libc6 libstdc++6 <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>If you compile from source, the binary path is <code>./target/release/dbc-chain</code></li><li>You can give your validator any name that you like, but note that others will be able to see it, and it will be included in the list of all servers using the same telemetry server. Since numerous people are using telemetry, it is recommended that you choose something likely to be unique.</li></ul><h2 id="_5-generaterotatekey" tabindex="-1"><a class="header-anchor" href="#_5-generaterotatekey" aria-hidden="true">#</a> 5. generate<code>rotateKey</code></h2><p>Run the following command in the terminal, and record the result.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token parameter variable">-d</span> <span class="token string">&#39;{&quot;id&quot;:1, &quot;jsonrpc&quot;:&quot;2.0&quot;, &quot;method&quot;: &quot;author_rotateKeys&quot;, &quot;params&quot;:[]}&#39;</span> http://localhost:9933
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_6-bond-stash" tabindex="-1"><a class="header-anchor" href="#_6-bond-stash" aria-hidden="true">#</a> 6. Bond stash</h2>`,19),B={href:"https://www.dbcwallet.io/?rpc=wss%3A%2F%2Finfo.dbcwallet.io#/accounts",target:"_blank",rel:"noopener noreferrer"},D=a("img",{src:u,alt:"image-20210121194808850",loading:"lazy"},null,-1),q=a("li",null,[a("p",null,[n("navigate to"),a("code",null,"Staking > Account actions"),n("，click "),a("code",null,"stash"),a("img",{src:h,alt:"image-20210121194953014",loading:"lazy"})])],-1),S=a("li",null,[a("p",null,[n("You should set bond balance（Make sure not to bond all your DBC balance since you will be unable to pay transaction fees from your bonded balance.）："),a("img",{src:m,alt:"image-20210121195033167",loading:"lazy"})])],-1),z=e('<p><strong>Description：</strong></p><ul><li><p><code>Stash account</code>：Select your Stash account. In this example, we will bond 45 DBC - make sure that your Stash account contains <em>at least</em> this much. You can, of course, stake more than this.</p></li><li><p><code>controller account</code>：Select the Controller account created earlier. This account will also need a small amount of DBC in order to start and stop validating.</p></li><li><p><code>value bonded</code>：How much DBC from the Stash account you want to bond/stake. Note that you do not need to bond all of the DBC in that account. Also note that you can always bond <em>more</em> DBC later.</p></li><li><p><code>payment destination</code>：The account where the rewards from validating are sent.</p></li></ul><h2 id="_7-set-session-keys" tabindex="-1"><a class="header-anchor" href="#_7-set-session-keys" aria-hidden="true">#</a> 7. Set Session Keys</h2>',3),I=a("li",null,[a("p",null,[n("After bond your stash，you can see in Polkadot UI "),a("code",null,"Session Key"),n("button："),a("img",{src:b,alt:"image-20210121195307711",loading:"lazy"})])],-1),W=a("li",null,[a("p",null,[n("click it and input the result in step 5"),a("code",null,"rotateKeys"),a("img",{src:v,alt:"image-20210121200709277",loading:"lazy"})])],-1),N={href:"https://telemetry.polkadot.io/#list/0xd523fa2e0581f069b4f0c7b5944c21e9abc72305a08067868c91b898d1bf1dff",target:"_blank",rel:"noopener noreferrer"},G=a("img",{src:g,alt:"image-20210121234945030",loading:"lazy"},null,-1),L=e('<h2 id="_8-validate" tabindex="-1"><a class="header-anchor" href="#_8-validate" aria-hidden="true">#</a> 8. Validate</h2><ul><li>After steps above you can see<code>Validate</code> button and click it,</li></ul><figure><img src="'+k+'" alt="image-20210121235144583" tabindex="0" loading="lazy"><figcaption>image-20210121235144583</figcaption></figure><ul><li>You should set your preference as a validator.</li></ul><figure><img src="'+f+'" alt="image-20210121235217665" tabindex="0" loading="lazy"><figcaption>image-20210121235217665</figcaption></figure><ul><li>In <code>reward commission percentage</code> you should input your commission preference. Then clieck <code>Validate</code> to send this transaction。Then，in <code>Waiting</code> page，you are waiting status<code>Era</code> to be a validator.</li></ul><figure><img src="'+_+'" alt="image-20210121235451552" tabindex="0" loading="lazy"><figcaption>image-20210121235451552</figcaption></figure><h2 id="_9-claim-your-rewards-payout" tabindex="-1"><a class="header-anchor" href="#_9-claim-your-rewards-payout" aria-hidden="true">#</a> 9. Claim your rewards payout？</h2><p>Navigate to <code>Staking &gt; Payouts &gt; Max, 84 eras</code> ，you may see all the rewards to be payout：</p><figure><img src="'+y+'" alt="image-20210329095933403" tabindex="0" loading="lazy"><figcaption>image-20210329095933403</figcaption></figure><p>chick <code>Payout all</code> button to send a transaction.</p>',11);function R(T,j){const o=t("RouterLink"),i=t("ExternalLinkIcon");return l(),r("div",null,[x,a("p",null,[n("Reference: "),s(o,{to:"/kr/staking-model/generate-new-account.html"},{default:d(()=>[n("Generate new dbc account")]),_:1})]),C,a("ul",null,[a("li",null,[a("p",null,[n("open "),a("a",B,[n("https://www.dbcwallet.io/?rpc=wss%3A%2F%2Finfo.dbcwallet.io#/accounts"),s(i)]),n(" you will see your balance: "),D])]),q,S]),z,a("ul",null,[I,W,a("li",null,[a("p",null,[n("Now, check in "),a("a",N,[n("Telemetry"),s(i)]),n(" and you can see your node."),G])])]),L])}const M=c(w,[["render",R],["__file","join-dbc-network.html.vue"]]);export{M as default};
