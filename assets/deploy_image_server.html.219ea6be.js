import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o as n,c as s,a as i}from"./app.38166bb6.js";const r={},d=i(`<h1 id="deploy-image-server" tabindex="-1"><a class="header-anchor" href="#deploy-image-server" aria-hidden="true">#</a> deploy image server</h1><ul><li><p><strong>\u64CD\u4F5C\u7CFB\u7EDF\uFF1Aubuntu</strong></p></li><li><p><strong>\u8BBE\u7F6E\u5F00\u673A\u542F\u52A8 rsync-daemon</strong></p><p><code>sudo vim /etc/default/rsync</code></p><p>\u5C06 false \u6539\u4E3A true:</p><p><code>RSYNC_ENABLE=true</code></p></li></ul><ul><li><p><strong>\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6 rsyncd.conf</strong></p><p>\u624B\u52A8\u590D\u5236\uFF1A</p><p><code>sudo cp /usr/share/doc/rsync/examples/rsyncd.conf /etc</code></p><p>\u4FEE\u6539 /etc/rsyncd.conf\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>######### \u5168\u5C40: \u914D\u7F6E\u53C2\u6570 ##########
port=873    # \u6307\u5B9Arsync\u7AEF\u53E3\u3002\u9ED8\u8BA4873
uid = nobody # rsync\u670D\u52A1\u7684\u8FD0\u884C\u7528\u6237\uFF0C\u9ED8\u8BA4\u662Fnobody\uFF0C\u6587\u4EF6\u4F20\u8F93\u6210\u529F\u540E\u5C5E\u4E3B\u5C06\u662F\u8FD9\u4E2Auid
gid = nogroup # rsync\u670D\u52A1\u7684\u8FD0\u884C\u7EC4\uFF0C\u9ED8\u8BA4\u662Fnobody\uFF0C\u6587\u4EF6\u4F20\u8F93\u6210\u529F\u540E\u5C5E\u7EC4\u5C06\u662F\u8FD9\u4E2Agid
use chroot = yes # rsync daemon\u5728\u4F20\u8F93\u524D\u662F\u5426\u5207\u6362\u5230\u6307\u5B9A\u7684path\u76EE\u5F55\u4E0B\uFF0C\u5E76\u5C06\u5176\u76D1\u7981\u5728\u5185
max connections = 0 # \u6307\u5B9A\u6700\u5927\u8FDE\u63A5\u6570\u91CF\uFF0C0\u8868\u793A\u6CA1\u6709\u9650\u5236
timeout = 60  # \u786E\u4FDDrsync\u670D\u52A1\u5668\u4E0D\u4F1A\u6C38\u8FDC\u7B49\u5F85\u4E00\u4E2A\u5D29\u6E83\u7684\u5BA2\u6237\u7AEF\uFF0C0\u8868\u793A\u6C38\u8FDC\u7B49\u5F85
motd file = /var/rsyncd/rsync.motd   # \u5BA2\u6237\u7AEF\u8FDE\u63A5\u8FC7\u6765\u663E\u793A\u7684\u6D88\u606F
lock file = /var/run/rsync.lock      # \u6307\u5B9A\u9501\u6587\u4EF6
log file = /var/log/rsyncd.log       # \u6307\u5B9Arsync\u7684\u65E5\u5FD7\u6587\u4EF6\uFF0C\u800C\u4E0D\u628A\u65E5\u5FD7\u53D1\u9001\u7ED9syslog
dont compress = *.gz *.tgz *.zip *.z *.Z *.rpm *.deb *.bz2  # \u6307\u5B9A\u54EA\u4E9B\u6587\u4EF6\u4E0D\u7528\u8FDB\u884C\u538B\u7F29\u4F20\u8F93

######### \u6A21\u5757: \u914D\u7F6E\u53C2\u6570 ##########
[images]        # \u6A21\u5757ID
path = /data/ # \u6307\u5B9A\u8BE5\u6A21\u5757\u7684\u8DEF\u5F84\uFF0C\u542F\u52A8rsync\u670D\u52A1\u524D\u8BE5\u76EE\u5F55\u5FC5\u987B\u5B58\u5728
ignore errors = yes     # \u5FFD\u7565\u67D0\u4E9BIO\u9519\u8BEF\u4FE1\u606F
ignore nonreadable = yes
read only = no  # \u6307\u5B9A\u8BE5\u6A21\u5757\u662F\u5426\u53EF\u8BFB\u5199\uFF0C\u5373\u80FD\u5426\u4E0A\u4F20\u6587\u4EF6\uFF0Cno\u8868\u793A\u53EF\u8BFB\u5199\uFF0Cyes\u8868\u793A\u53EF\u8BFB\u4E0D\u53EF\u5199
write only = no # \u6307\u5B9A\u8BE5\u6A21\u5F0F\u662F\u5426\u652F\u6301\u4E0B\u8F7D\uFF0C\u8BBE\u7F6E\u4E3Ayes\u8868\u793A\u5BA2\u6237\u7AEF\u4E0D\u80FD\u4E0B\u8F7D
list = no       # \u5BA2\u6237\u7AEF\u8BF7\u6C42\u663E\u793A\u6A21\u5757\u5217\u8868\u65F6\uFF0C\u8BE5\u6A21\u5757\u662F\u5426\u663E\u793A\u51FA\u6765\uFF0C\u8BBE\u7F6E\u4E3Ano\u5219\u8BE5\u6A21\u5757\u4E3A\u9690\u85CF\u6A21\u5757
# hosts deny = 0.0.0.0/32   # \u6307\u5B9A\u4E0D\u5141\u8BB8\u8FDE\u63A5\u5230\u8BE5\u6A21\u5757\u7684\u673A\u5668
transfer logging = no
strict modes = yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>\u542F\u52A8 rsync \u670D\u52A1</strong></p><p><code>rsync --daemon</code></p></li><li><p><strong>\u5BA2\u6237\u7AEF\u8282\u70B9\u4E0A\u914D\u7F6E\u955C\u50CF\u4E2D\u5FC3\u5730\u5740</strong></p><p><code>image_server=&lt;id&gt;,&lt;ip&gt;,&lt;port&gt;,&lt;modulename&gt;</code></p><p>id: \u7528\u6237\u81EA\u5B9A\u4E49 ID\uFF0C\u7528\u4E8E\u6807\u8BC6\u6539\u955C\u50CF\u4E2D\u5FC3</p><p>ip: \u955C\u50CF\u4E2D\u5FC3 ip \u5730\u5740</p><p>port: \u955C\u50CF\u4E2D\u5FC3\u670D\u52A1\u5668\u4E0A rsync-server \u7684\u76D1\u542C\u5730\u5740\uFF0C\u9ED8\u8BA4 873\uFF0C\u89C1\u4E0A\u8FF0\u914D\u7F6E\u6587\u4EF6</p><p>modulename: \u955C\u50CF\u4E2D\u5FC3\u4E0A\u914D\u7F6E\u7684\u6A21\u5757 ID\uFF0C\u9ED8\u8BA4 images\uFF0C\u89C1\u4E0A\u8FF0\u914D\u7F6E\u6587\u4EF6</p><p>\u793A\u4F8B\uFF1A</p><p><code>image_server=ID_1,127.0.0.1,873,images</code></p></li></ul>`,3),l=[d];function o(c,a){return n(),s("div",null,l)}var p=e(r,[["render",o],["__file","deploy_image_server.html.vue"]]);export{p as default};
