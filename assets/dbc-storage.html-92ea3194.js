import{_ as e,W as l,X as d,a0 as a}from"./framework-cd0f4961.js";const n={};function i(s,t){return l(),d("div",null,t[0]||(t[0]=[a('<h1 id="链上存储" tabindex="-1"><a class="header-anchor" href="#链上存储" aria-hidden="true">#</a> 链上存储</h1><h2 id="onlineprofile-模块" tabindex="-1"><a class="header-anchor" href="#onlineprofile-模块" aria-hidden="true">#</a> onlineProfile 模块</h2><h3 id="value" tabindex="-1"><a class="header-anchor" href="#value" aria-hidden="true">#</a> value</h3><table><thead><tr><th style="text-align:left;">存储</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">onlineStakeParams</td><td style="text-align:left;">OnlineStakeParamsInfo</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">standardGpuPointPrice</td><td style="text-align:left;">StandardGpuPointPrice</td><td style="text-align:left;">A standard example for rent fee calculation(price: USD*10^6)</td></tr><tr><td style="text-align:left;">galaxyIsOn</td><td style="text-align:left;">bool</td><td style="text-align:left;">If galaxy competition is begin: switch 5000 gpu</td></tr><tr><td style="text-align:left;">galaxyOnGpuThreshold</td><td style="text-align:left;">5000</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">sysInfo</td><td style="text-align:left;">SysInfoDetail</td><td style="text-align:left;">Statistics of gpu and stake</td></tr><tr><td style="text-align:left;">nextSlashId</td><td style="text-align:left;">u64</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">allMachineIdSnap</td><td style="text-align:left;">AllMachineIdSnapDetail</td><td style="text-align:left;">将要发放奖励的机器</td></tr><tr><td style="text-align:left;">phaseRewardInfo</td><td style="text-align:left;">PhaseRewardInfoDetail</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">liveMachines</td><td style="text-align:left;">LiveMachine</td><td style="text-align:left;">系统中存储有数据的机器</td></tr><tr><td style="text-align:left;">currentEra</td><td style="text-align:left;">EraIndex</td><td style="text-align:left;">模块当前是第几天（2880 Block/Era）</td></tr></tbody></table><h3 id="map" tabindex="-1"><a class="header-anchor" href="#map" aria-hidden="true">#</a> Map</h3><table><thead><tr><th style="text-align:left;">存储</th><th style="text-align:left;">键类型</th><th style="text-align:left;">值类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">stashController</td><td style="text-align:left;">AccountId</td><td style="text-align:left;">AccountId</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">controllerStash</td><td style="text-align:left;">AccountId</td><td style="text-align:left;">AccountId</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">machinesInfo</td><td style="text-align:left;">MachineId</td><td style="text-align:left;">MachineInfo</td><td style="text-align:left;">Detail info of machines</td></tr><tr><td style="text-align:left;">stashMachines</td><td style="text-align:left;">AccountId</td><td style="text-align:left;">StashMachine</td><td style="text-align:left;">Statistics of stash account</td></tr><tr><td style="text-align:left;">stashServerRooms</td><td style="text-align:left;">AccountId</td><td style="text-align:left;"><code>Vec&lt;H256&gt;</code></td><td style="text-align:left;">Server rooms in stash account</td></tr><tr><td style="text-align:left;">controllerMachines</td><td style="text-align:left;">AccountId</td><td style="text-align:left;"><code>Vec&lt;MachineId&gt;</code></td><td style="text-align:left;">All machines controlled by controller</td></tr><tr><td style="text-align:left;">erasStashPoints</td><td style="text-align:left;">EraIndex</td><td style="text-align:left;">EraStashPoints</td><td style="text-align:left;">每个 Era 资金账户的得分快照</td></tr><tr><td style="text-align:left;">erasMachinePoints</td><td style="text-align:left;">EraIndex</td><td style="text-align:left;"><code>BTreeMap&lt;MachineId, MachineGradeStatus&gt;</code></td><td style="text-align:left;">每个 Era 机器的得分快照</td></tr><tr><td style="text-align:left;">stashStake</td><td style="text-align:left;">AccountId</td><td style="text-align:left;">Balance</td><td style="text-align:left;">资金账户的质押总计</td></tr><tr><td style="text-align:left;">machineRecentReward</td><td style="text-align:left;">MachineId</td><td style="text-align:left;">MachineRecentRewardInfo</td><td style="text-align:left;">store max 150 era reward</td></tr><tr><td style="text-align:left;">eraReward</td><td style="text-align:left;">EraIndex</td><td style="text-align:left;">Balance</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">pendingSlash</td><td style="text-align:left;">u64</td><td style="text-align:left;">OPPendingSlashInfo</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">pendingSlashReview</td><td style="text-align:left;">SlashId</td><td style="text-align:left;">OPPendingSlashReviewInfo</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">rentedFinished</td><td style="text-align:left;">MachineId</td><td style="text-align:left;">AccountId</td><td style="text-align:left;"></td></tr></tbody></table><h3 id="doublemap" tabindex="-1"><a class="header-anchor" href="#doublemap" aria-hidden="true">#</a> DoubleMap</h3><table><thead><tr><th style="text-align:left;">存储</th><th style="text-align:left;">键类型</th><th style="text-align:left;">值类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">userMutHardwareStake</td><td style="text-align:left;">(AccountId,MachineId)</td><td style="text-align:left;">UserMutHardwareStakeInfo</td><td style="text-align:left;">Reonline to change hardware, should stake some balance</td></tr><tr><td style="text-align:left;">posGpuInfo</td><td style="text-align:left;">(Longitude, Latitude)</td><td style="text-align:left;">PosInfo</td><td style="text-align:left;">Statistics of gpu in one position</td></tr><tr><td style="text-align:left;">erasMachineReward</td><td style="text-align:left;">(EraIndex, MachineId)</td><td style="text-align:left;">Balance</td><td style="text-align:left;">某个 Era 机器获得的总奖励</td></tr><tr><td style="text-align:left;">erasMachineReleasedReward</td><td style="text-align:left;">(EraIndex,MachineId)</td><td style="text-align:left;">Balance</td><td style="text-align:left;">某个 Era 机器释放的总奖励</td></tr><tr><td style="text-align:left;">erasStashReward</td><td style="text-align:left;">(EraIndex, AccountId)</td><td style="text-align:left;">Balance</td><td style="text-align:left;">某个 Era Stash 获得的总奖励</td></tr><tr><td style="text-align:left;">erasStashReleasedReward</td><td style="text-align:left;">(EraIndex, AccountId)</td><td style="text-align:left;">Balance</td><td style="text-align:left;">某个 Era Stash 解锁的总奖励</td></tr></tbody></table><h2 id="onlinecommittee-模块" tabindex="-1"><a class="header-anchor" href="#onlinecommittee-模块" aria-hidden="true">#</a> onlineCommittee 模块</h2><h3 id="value-1" tabindex="-1"><a class="header-anchor" href="#value-1" aria-hidden="true">#</a> Value</h3><table><thead><tr><th style="text-align:left;">存储</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">nextSlashId</td><td style="text-align:left;">u64</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">unhandledSlash</td><td style="text-align:left;"><code>Vec&lt;SlashId&gt;</code></td><td style="text-align:left;"></td></tr></tbody></table><h3 id="map-1" tabindex="-1"><a class="header-anchor" href="#map-1" aria-hidden="true">#</a> Map</h3><table><thead><tr><th style="text-align:left;">存储</th><th style="text-align:left;">键类型</th><th style="text-align:left;">值类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">committeeMachine</td><td style="text-align:left;">AccountId</td><td style="text-align:left;">OCCommitteeMachineList</td><td style="text-align:left;">存储用户订阅的不同确认阶段的机器</td></tr><tr><td style="text-align:left;">machineCommittee</td><td style="text-align:left;">MachineId</td><td style="text-align:left;">OCMachineCommitteeList</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">machineSubmitedHash</td><td style="text-align:left;">MachineId</td><td style="text-align:left;"><code>Vec&lt;[u8; 16]&gt;</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">committeeOps</td><td style="text-align:left;"><code>(AccountId,MachineId)</code></td><td style="text-align:left;">OCCommitteeOps</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">pendingSlash</td><td style="text-align:left;">SlashId</td><td style="text-align:left;">OCPendingSlashInfo</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">pendingSlashReview</td><td style="text-align:left;">SlashId</td><td style="text-align:left;">OCPendingSlashReviewInfo</td><td style="text-align:left;"></td></tr></tbody></table><h2 id="rentmachine-模块" tabindex="-1"><a class="header-anchor" href="#rentmachine-模块" aria-hidden="true">#</a> rentMachine 模块</h2><h3 id="map-2" tabindex="-1"><a class="header-anchor" href="#map-2" aria-hidden="true">#</a> Map</h3><table><thead><tr><th style="text-align:left;">存储</th><th style="text-align:left;">键类型</th><th style="text-align:left;">值类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">userRented</td><td style="text-align:left;">AccountId</td><td style="text-align:left;"><code>Vec&lt;MachineId&gt;</code></td><td style="text-align:left;">存储用户当前租用的机器列表</td></tr><tr><td style="text-align:left;">rentOrder</td><td style="text-align:left;">MachineId</td><td style="text-align:left;">RentOrderDetail</td><td style="text-align:left;">用户当前租用的某个机器的详情</td></tr><tr><td style="text-align:left;">pendingConfirming</td><td style="text-align:left;">MachineId</td><td style="text-align:left;">AccountId</td><td style="text-align:left;">等待用户确认租用成功的机器</td></tr><tr><td style="text-align:left;">pending_rent_ending</td><td style="text-align:left;">BlockNumber</td><td style="text-align:left;"><code>Vec&lt;MachineId&gt;</code></td><td style="text-align:left;">记录每个区块将要结束租用的机器</td></tr><tr><td style="text-align:left;">userTotalStake</td><td style="text-align:left;">AccountId</td><td style="text-align:left;">Balance</td><td style="text-align:left;">存储每个用户在该模块中的总质押量</td></tr></tbody></table><h3 id="value-2" tabindex="-1"><a class="header-anchor" href="#value-2" aria-hidden="true">#</a> Value</h3><table><thead><tr><th style="text-align:left;">存储</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">rentFeePot</td><td style="text-align:left;">AccountId</td><td style="text-align:left;">租金支付目标地址(银河竞赛开启后，用该账户销毁租金)</td></tr></tbody></table>',18)]))}const f=e(n,[["render",i],["__file","dbc-storage.html.vue"]]);export{f as default};
